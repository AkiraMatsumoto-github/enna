---
import Layout from "../layouts/Layout.astro";
import Header from "../components/common/Header.astro";
import Footer from "../components/common/Footer.astro";
import SectionTitle from "../components/ui/SectionTitle.astro";
import WaveDivider from "../components/ui/WaveDivider.astro";
import { getNews } from "../utils/microcms";

// Fetch News from microCMS
const response = await getNews({
    fields: ["id", "title", "published", "category"],
    limit: 3,
});
const news = response.contents;

const features = [
    {
        title: "国家資格保有のプロ",
        desc: "保育士・幼稚園教諭の資格を持つプロフェッショナルが、安心・安全な保育を提供します。",
        icon: "/images/feature-professional.png",
    },
    {
        title: "独自の知育アクティビティ",
        desc: "小麦粉粘土や手形アートなど、お子様の感性を育む独自の遊びプログラムをご用意。",
        icon: "/images/feature-activity.png",
    },
    {
        title: "産後ケア・育児相談",
        desc: "ママの心に寄り添うケアと、専門的なアドバイスで育児の不安を解消します。",
        icon: "/images/feature-care.png",
    },
];
---

<Layout title="enna | ママと赤ちゃんを包み込む、プロフェッショナルの温もり">
    <Header />

    <main class="flex-1 pt-16">
        <!-- Hero Section -->
        <section
            class="relative h-[80vh] min-h-[500px] flex items-center justify-center overflow-hidden"
        >
            <div class="absolute inset-0 z-0">
                <img
                    src="/hero.png"
                    alt="Hero Background"
                    class="w-full h-full object-cover opacity-90"
                />
                <div class="absolute inset-0 bg-white/30 backdrop-blur-[2px]">
                </div>
            </div>

            <div
                class="relative z-10 text-center px-5 flex flex-col items-center gap-6 animate-on-scroll"
            >
                <h1
                    class="text-3xl md:text-5xl font-bold text-brand-accent leading-relaxed tracking-wider drop-shadow-sm"
                >
                    子どもに寄り添う<br />
                    オンリーワンの保育
                </h1>
                <p
                    class="text-brand-text/90 font-medium text-lg md:text-xl tracking-wide max-w-xl"
                >
                    一人ひとりの個性と成長に合わせた、<br class="md:hidden" />
                    きめ細やかなシッティング。<br />
                    ママと赤ちゃんの笑顔をサポートします。
                </p>
                <a
                    href="/contact"
                    class="mt-4 bg-brand-main text-white font-bold py-4 px-10 rounded-full shadow-lg hover:shadow-xl hover:scale-105 transition-all text-lg"
                >
                    まずは面談を予約する
                </a>
            </div>
            <WaveDivider
                position="bottom"
                fill="var(--color-brand-base)"
                flip={true}
            />
        </section>

        <!-- Features Section -->
        <section class="py-20 bg-brand-base px-5 relative">
            <div class="max-w-screen-xl mx-auto">
                <SectionTitle en="Features" ja="ennaの3つの特徴" />

                <div class="grid grid-cols-1 md:grid-cols-3 gap-6 md:gap-10">
                    {
                        features.map((feature, index) => (
                            <div
                                class="bg-white rounded-2xl md:rounded-3xl shadow-sm hover:shadow-lg hover:-translate-y-1 transition-all duration-300 flex flex-row md:flex-col border border-brand-light/50 overflow-hidden group animate-on-scroll"
                                style={`transition-delay: ${index * 100}ms`}
                            >
                                <div class="w-[130px] md:w-full md:h-64 bg-brand-base/20 relative overflow-hidden shrink-0">
                                    <img
                                        src={feature.icon}
                                        alt={feature.title}
                                        class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-500"
                                    />
                                </div>
                                <div class="p-5 md:p-8 flex flex-col justify-center items-start md:items-center text-left md:text-center gap-2 md:gap-4 flex-1">
                                    <h3 class="text-lg md:text-xl font-bold text-brand-accent">
                                        {feature.title}
                                    </h3>
                                    <p class="text-brand-text/80 leading-relaxed text-sm">
                                        {feature.desc}
                                    </p>
                                </div>
                            </div>
                        ))
                    }
                </div>
                <div class="mt-10 text-center">
                    <a
                        href="/service"
                        class="inline-block border border-brand-main text-brand-main font-bold py-3 px-8 rounded-full hover:bg-brand-main hover:text-white transition-colors"
                    >
                        サービス内容を詳しく見る
                    </a>
                </div>
            </div>
        </section>

        <!-- News Section -->
        <section class="py-20 bg-white px-5 relative">
            <WaveDivider position="top" fill="var(--color-brand-base)" />
            <div class="max-w-screen-md mx-auto">
                <SectionTitle en="News" ja="お知らせ" />

                <div class="flex flex-col gap-4">
                    {
                        news.length > 0 ? (
                            news.map((item, index) => (
                                <article
                                    class="border-b border-brand-light pb-4 last:border-0 hover:bg-brand-base/30 transition-colors p-4 rounded-lg animate-on-scroll"
                                    style={`transition-delay: ${index * 100}ms`}
                                >
                                    <a
                                        href={`/news/${item.id}`}
                                        class="flex flex-col md:flex-row md:items-center gap-2 md:gap-6"
                                    >
                                        <div class="flex items-center gap-3">
                                            <time
                                                class="text-sm text-gray-400 font-en"
                                                datetime={item.published}
                                            >
                                                {new Date(
                                                    item.published,
                                                ).toLocaleDateString("ja-JP")}
                                            </time>
                                            {item.category &&
                                                item.category.length > 0 && (
                                                    <span class="text-xs bg-brand-sub/20 text-brand-sub px-2 py-1 rounded-md font-bold">
                                                        {item.category[0]}
                                                    </span>
                                                )}
                                        </div>
                                        <h3 class="text-brand-text font-medium flex-1 group-hover:text-brand-main transition-colors line-clamp-1">
                                            {item.title}
                                        </h3>
                                    </a>
                                </article>
                            ))
                        ) : (
                            <p class="text-center text-gray-400 py-10">
                                お知らせはありません
                            </p>
                        )
                    }
                </div>
                <div class="mt-10 text-center">
                    <a
                        href="/news"
                        class="text-brand-main font-bold hover:underline"
                    >
                        お知らせ一覧 >
                    </a>
                </div>
            </div>
        </section>

        <!-- Reviews Section -->
        <section class="py-20 bg-brand-light/30 px-5 relative">
            <WaveDivider position="top" fill="#ffffff" />
            <div class="max-w-screen-xl mx-auto text-center">
                <SectionTitle en="Reviews" ja="お客様の声" />

                <div
                    class="grid md:grid-cols-2 gap-8 text-left max-w-4xl mx-auto"
                >
                    <!-- Review 1 -->
                    <div
                        class="bg-white p-8 rounded-3xl shadow-sm relative hover:-translate-y-1 transition-transform duration-300 animate-on-scroll"
                    >
                        <div
                            class="absolute -top-4 left-8 text-4xl text-brand-main opacity-30 font-hand"
                        >
                            ❝
                        </div>
                        <p class="text-brand-text leading-loose mb-4">
                            初めてのシッティングで不安でしたが、事前面談でとても丁寧にお話を聞いてくださり安心できました。
                            人見知りの息子もすぐに打ち解けて、楽しそうにしていました。
                        </p>
                        <div
                            class="text-right text-sm text-brand-accent font-bold"
                        >
                            - 1歳児のママ
                        </div>
                    </div>
                    <!-- Review 2 -->
                    <div
                        class="bg-white p-8 rounded-3xl shadow-sm relative hover:-translate-y-1 transition-transform duration-300 animate-on-scroll"
                        style="transition-delay: 100ms"
                    >
                        <div
                            class="absolute -top-4 left-8 text-4xl text-brand-main opacity-30"
                        >
                            ❝
                        </div>
                        <p class="text-brand-text leading-loose mb-4">
                            小麦粉粘土などの独自の遊びを用意してくださるので、ただ預けるだけでなく子供にとっても貴重な体験になっているようです。
                        </p>
                        <div
                            class="text-right text-sm text-brand-accent font-bold"
                        >
                            - 0歳児のママ
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Flow Section -->
        <section class="py-20 bg-brand-base px-5 relative">
            <WaveDivider position="top" fill="rgba(244, 232, 232, 0.3)" />

            <div class="max-w-screen-xl mx-auto text-center">
                <SectionTitle en="Flow" ja="ご利用の流れ" />

                <div
                    class="grid grid-cols-1 lg:grid-cols-6 gap-6 md:gap-4 max-w-6xl mx-auto relative px-4 md:px-0"
                >
                    <!-- Step 1 -->
                    <div
                        class="flex flex-row lg:flex-col items-center gap-6 lg:gap-0 relative group text-left lg:text-center"
                    >
                        <div
                            class="w-20 h-20 lg:w-32 lg:h-32 mb-0 lg:mb-4 p-2 bg-[#fffdf5] rounded-full shadow-md flex items-center justify-center relative z-10 hover:scale-105 transition-transform duration-300 border-2 border-brand-main/20 flex-shrink-0"
                        >
                            <img
                                src="/images/flow-inquiry.png"
                                alt="お問い合わせ"
                                class="w-full h-full object-cover rounded-full"
                            />
                            <div
                                class="absolute -top-1 -left-1 bg-[#EB949E] text-white w-8 h-8 rounded-full flex items-center justify-center font-bold shadow-sm text-sm"
                            >
                                1
                            </div>
                        </div>
                        <div>
                            <h3
                                class="font-bold text-lg mb-1 lg:mb-2 text-brand-accent"
                            >
                                お問い合わせ
                            </h3>
                            <p
                                class="text-sm text-brand-text/80 leading-relaxed"
                            >
                                フォームまたは<br
                                    class="hidden lg:block"
                                />公式LINEから。
                            </p>
                        </div>

                        <!-- Arrow (Desktop: Right, Mobile: Down-Small) -->
                        <div
                            class="hidden lg:block absolute top-16 -right-5 text-brand-main/30 text-xl z-0 pointer-events-none transform -translate-y-1/2"
                        >
                            →
                        </div>
                        <div
                            class="lg:hidden absolute -bottom-5 left-10 text-brand-main/30 text-xl z-0 pointer-events-none transform -translate-x-1/2"
                        >
                            ↓
                        </div>
                    </div>

                    <!-- Step 2 -->
                    <div
                        class="flex flex-row lg:flex-col items-center gap-6 lg:gap-0 relative group text-left lg:text-center"
                    >
                        <div
                            class="w-20 h-20 lg:w-32 lg:h-32 mb-0 lg:mb-4 p-2 bg-[#fffdf5] rounded-full shadow-md flex items-center justify-center relative z-10 hover:scale-105 transition-transform duration-300 border-2 border-brand-main/20 flex-shrink-0"
                        >
                            <img
                                src="/images/flow-interview.png"
                                alt="事前面談"
                                class="w-full h-full object-cover rounded-full"
                            />
                            <div
                                class="absolute -top-1 -left-1 bg-[#EB949E] text-white w-8 h-8 rounded-full flex items-center justify-center font-bold shadow-sm text-sm"
                            >
                                2
                            </div>
                        </div>
                        <div>
                            <h3
                                class="font-bold text-lg mb-1 lg:mb-2 text-brand-accent"
                            >
                                事前面談
                            </h3>
                            <p
                                class="text-sm text-brand-text/80 leading-relaxed"
                            >
                                オンラインで<br
                                    class="hidden lg:block"
                                />ご要望を伺います。
                            </p>
                        </div>
                        <div
                            class="hidden lg:block absolute top-16 -right-5 text-brand-main/30 text-xl z-0 pointer-events-none transform -translate-y-1/2"
                        >
                            →
                        </div>
                        <div
                            class="lg:hidden absolute -bottom-5 left-10 text-brand-main/30 text-xl z-0 pointer-events-none transform -translate-x-1/2"
                        >
                            ↓
                        </div>
                    </div>

                    <!-- Step 3 -->
                    <div
                        class="flex flex-row lg:flex-col items-center gap-6 lg:gap-0 relative group text-left lg:text-center"
                    >
                        <div
                            class="w-20 h-20 lg:w-32 lg:h-32 mb-0 lg:mb-4 p-2 bg-[#fffdf5] rounded-full shadow-md flex items-center justify-center relative z-10 hover:scale-105 transition-transform duration-300 border-2 border-brand-main/20 flex-shrink-0"
                        >
                            <img
                                src="/images/flow-reservation.png"
                                alt="ご予約"
                                class="w-full h-full object-cover rounded-full"
                            />
                            <div
                                class="absolute -top-1 -left-1 bg-[#EB949E] text-white w-8 h-8 rounded-full flex items-center justify-center font-bold shadow-sm text-sm"
                            >
                                3
                            </div>
                        </div>
                        <div>
                            <h3
                                class="font-bold text-lg mb-1 lg:mb-2 text-brand-accent"
                            >
                                ご予約
                            </h3>
                            <p
                                class="text-sm text-brand-text/80 leading-relaxed"
                            >
                                ご希望の日時で<br
                                    class="hidden lg:block"
                                />予約確定。
                            </p>
                        </div>
                        <div
                            class="hidden lg:block absolute top-16 -right-5 text-brand-main/30 text-xl z-0 pointer-events-none transform -translate-y-1/2"
                        >
                            →
                        </div>
                        <div
                            class="lg:hidden absolute -bottom-5 left-10 text-brand-main/30 text-xl z-0 pointer-events-none transform -translate-x-1/2"
                        >
                            ↓
                        </div>
                    </div>

                    <!-- Step 4 -->
                    <div
                        class="flex flex-row lg:flex-col items-center gap-6 lg:gap-0 relative group text-left lg:text-center"
                    >
                        <div
                            class="w-20 h-20 lg:w-32 lg:h-32 mb-0 lg:mb-4 p-2 bg-[#fffdf5] rounded-full shadow-md flex items-center justify-center relative z-10 hover:scale-105 transition-transform duration-300 border-2 border-brand-main/20 flex-shrink-0"
                        >
                            <img
                                src="/images/flow-day.png"
                                alt="当日"
                                class="w-full h-full object-cover rounded-full"
                            />
                            <div
                                class="absolute -top-1 -left-1 bg-[#EB949E] text-white w-8 h-8 rounded-full flex items-center justify-center font-bold shadow-sm text-sm"
                            >
                                4
                            </div>
                        </div>
                        <div>
                            <h3
                                class="font-bold text-lg mb-1 lg:mb-2 text-brand-accent"
                            >
                                当日
                            </h3>
                            <p
                                class="text-sm text-brand-text/80 leading-relaxed"
                            >
                                シッティング開始。<br
                                    class="hidden lg:block"
                                />安心してお任せ。
                            </p>
                        </div>
                        <div
                            class="hidden lg:block absolute top-16 -right-5 text-brand-main/30 text-xl z-0 pointer-events-none transform -translate-y-1/2"
                        >
                            →
                        </div>
                        <div
                            class="lg:hidden absolute -bottom-5 left-10 text-brand-main/30 text-xl z-0 pointer-events-none transform -translate-x-1/2"
                        >
                            ↓
                        </div>
                    </div>

                    <!-- Step 5 -->
                    <div
                        class="flex flex-row lg:flex-col items-center gap-6 lg:gap-0 relative group text-left lg:text-center"
                    >
                        <div
                            class="w-20 h-20 lg:w-32 lg:h-32 mb-0 lg:mb-4 p-2 bg-[#fffdf5] rounded-full shadow-md flex items-center justify-center relative z-10 hover:scale-105 transition-transform duration-300 border-2 border-brand-main/20 flex-shrink-0"
                        >
                            <img
                                src="/images/flow-report.png"
                                alt="完了報告"
                                class="w-full h-full object-cover rounded-full"
                            />
                            <div
                                class="absolute -top-1 -left-1 bg-[#EB949E] text-white w-8 h-8 rounded-full flex items-center justify-center font-bold shadow-sm text-sm"
                            >
                                5
                            </div>
                        </div>
                        <div>
                            <h3
                                class="font-bold text-lg mb-1 lg:mb-2 text-brand-accent"
                            >
                                完了報告
                            </h3>
                            <p
                                class="text-sm text-brand-text/80 leading-relaxed"
                            >
                                詳細なレポートを<br
                                    class="hidden lg:block"
                                />お送りします。
                            </p>
                        </div>
                        <div
                            class="hidden lg:block absolute top-16 -right-5 text-brand-main/30 text-xl z-0 pointer-events-none transform -translate-y-1/2"
                        >
                            →
                        </div>
                        <div
                            class="lg:hidden absolute -bottom-5 left-10 text-brand-main/30 text-xl z-0 pointer-events-none transform -translate-x-1/2"
                        >
                            ↓
                        </div>
                    </div>

                    <!-- Step 6 -->
                    <div
                        class="flex flex-row lg:flex-col items-center gap-6 lg:gap-0 relative group text-left lg:text-center"
                    >
                        <div
                            class="w-20 h-20 lg:w-32 lg:h-32 mb-0 lg:mb-4 p-2 bg-[#fffdf5] rounded-full shadow-md flex items-center justify-center relative z-10 hover:scale-105 transition-transform duration-300 border-2 border-brand-main/20 flex-shrink-0"
                        >
                            <img
                                src="/images/flow-payment.png"
                                alt="お支払い"
                                class="w-full h-full object-cover rounded-full"
                            />
                            <div
                                class="absolute -top-1 -left-1 bg-[#EB949E] text-white w-8 h-8 rounded-full flex items-center justify-center font-bold shadow-sm text-sm"
                            >
                                6
                            </div>
                        </div>
                        <div>
                            <h3
                                class="font-bold text-lg mb-1 lg:mb-2 text-brand-accent"
                            >
                                お支払い
                            </h3>
                            <p
                                class="text-sm text-brand-text/80 leading-relaxed"
                            >
                                キャッシュレスで<br
                                    class="hidden lg:block"
                                />スマート決済。
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- FAQ Section -->
        <section class="py-20 bg-white px-5 relative">
            <WaveDivider position="top" fill="var(--color-brand-base)" />
            <div class="max-w-screen-md mx-auto">
                <SectionTitle en="FAQ" ja="よくあるご質問" />

                <div class="flex flex-col gap-4">
                    <details
                        class="group bg-brand-base rounded-lg p-5 cursor-pointer animate-on-scroll"
                    >
                        <summary
                            class="flex justify-between items-center font-bold text-brand-accent list-none"
                        >
                            <span>Q. 病児保育は対応していますか？</span>
                            <span
                                class="transition-transform group-open:rotate-180 text-brand-main"
                                >▼</span
                            >
                        </summary>
                        <p
                            class="text-brand-text/80 mt-4 leading-relaxed text-sm"
                        >
                            はい、対応可能です。ただし、感染症の種類や症状によってはお受けできない場合もございますので、まずはご相談ください。
                        </p>
                    </details>
                    <details
                        class="group bg-brand-base rounded-lg p-5 cursor-pointer animate-on-scroll"
                        style="transition-delay: 100ms"
                    >
                        <summary
                            class="flex justify-between items-center font-bold text-brand-accent list-none"
                        >
                            <span>Q. 支払い方法は何がありますか？</span>
                            <span
                                class="transition-transform group-open:rotate-180 text-brand-main"
                                >▼</span
                            >
                        </summary>
                        <p
                            class="text-brand-text/80 mt-4 leading-relaxed text-sm"
                        >
                            現在は銀行振込、またはPayPayでのお支払いに対応しております。
                        </p>
                    </details>
                    <details
                        class="group bg-brand-base rounded-lg p-5 cursor-pointer animate-on-scroll"
                        style="transition-delay: 200ms"
                    >
                        <summary
                            class="flex justify-between items-center font-bold text-brand-accent list-none"
                        >
                            <span
                                >Q. 兄弟姉妹の同時シッティングは可能ですか？</span
                            >
                            <span
                                class="transition-transform group-open:rotate-180 text-brand-main"
                                >▼</span
                            >
                        </summary>
                        <p
                            class="text-brand-text/80 mt-4 leading-relaxed text-sm"
                        >
                            はい、可能です。お二人目以降はオプション料金(+500円/1h)にて承っております。安全確保のため、年齢構成によってはご相談させていただく場合がございます。
                        </p>
                    </details>
                </div>
            </div>
        </section>

        <!-- Bottom CTA -->
        <section class="py-20 bg-brand-sub/10 px-5 text-center">
            <div
                class="max-w-screen-md mx-auto flex flex-col items-center gap-6"
            >
                <h2
                    class="text-2xl md:text-4xl font-bold text-brand-accent leading-snug"
                >
                    まずはオンライン面談で<br />
                    お話してみませんか？
                </h2>
                <p class="text-brand-text mb-4">
                    ご不明点もお気軽にご相談ください。<br />
                    お子様にぴったりのプランをご提案します。
                </p>
                <a
                    href="/contact"
                    class="bg-brand-main text-white font-bold py-4 px-12 rounded-full shadow-lg hover:shadow-xl hover:scale-105 transition-all text-xl"
                >
                    お問い合わせ・予約
                </a>
            </div>
        </section>

        <Footer />
    </main>
</Layout>
